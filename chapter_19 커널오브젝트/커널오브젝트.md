## 커널 오브젝트 (Kernel Objects)

### 원래는 windows 에서의 쓰레드 사용 입니다. 따라서 window 기반 내용이 포함되어 있습니다.

윈도우 기반에서 쓰레드를 이해하기 위해서는 '커널 오브젝트'를 먼저 이해해야 한다. 윈도우 기반에서의 쓰레드를 요령껏 설명한다면 커널 오브젝트니 하는 다소 생소한 내용은 새략도 가능하겠지만, 이는 필자가 원하는 바가 아니다. 뿐만아니라, 그렇게 이해해서는 우리에게 별로 도움이 되지 않는다.

## 커널 오브젝트란 무엇인가?

프로세스, 쓰레드 , 파일 , 그리고 앞으로 이야기할 세마포어 , 뮤텍스 등, 운영체제가 만드는 리소스 (Resource) 의 종류는 참으로 다양하다. 그리고 이들 대부분은 프로그래머의 요청에 의해서 생성되며, 요청의 방식(요청에 사용되는 함수)도 제각가이다. 그런데 이러한 차이점에도 불구하고 이들은 다음의 공통점을 지닌다.

"윈도우 운영체제가 생성해서 관리하는 리소스들이다."

위 문장에서 말하는 "관리" 의 방식 역시 리소스의 종류에 따라서 차이가 있다. 예를 들어서 파일이라면 파일과 관련된 데이터의 입출력 위치, 파일의 오픈 모드 (read or write) 등이 등록 및 갱신되어야 하며, 쓰레드라면 쓰레드의 ID, 그리고 쓰레드가 속한 프로세스의 정보가 등록 및 유지되어야 한다. 이렇듯 운영체제에 의해서 생성되는 리소스들은 관리를 목적으로 정보를 기록하기 위해 내부적으로 데이터 블록을 생성한다. 물론 리소스마다 유지해야 하는 정보가 다르니 이 데이터 블록의 형태는 리소스마다 차이가 있다. 그리고 이 데이터 블록을 가리켜 '커널 오브젝트' 라 한다.

예를 들어서 윈도우 상에서 mydata.txt 라는 파일을 생성했다고 가정해보자. 그렇다면 윈도우 운영체제는 파일 관리를 위해서 하나의 데이터 블록을 생성한다. 물론 이것이 바로 커널 오브젝트이다. 이렇듯 윈도우에서는 운영체제 윈도우에서는 운영체제의 리소스에 해당하는 프로세스, 쓰레드 그리고 쓰레드의 동기화에 사용되는 세마포어를 생성하더라도 각가의 관리를 위한 커널 오브젝트를 생성한다. 이정도면 커널 오브젝트가 무엇인지 이해했으리라 믿는다.

## 커널 오브젝트의 소유자는 운영체제이다.

쓰레드, 파일 드으이 생성요청이 프로세스 내에서 이뤄지기 때문에 , 이때 생성되는 커널 오브젝트의 소유자는 프로세스라고 생각하기 쉽다. 그러나 커널 오브젝트의 소유자는 커널(운영체제)이다. 그리고 소유자가 커널이라는 것은 다음의 의미를 갖는다.

"커널 오브젝트의 생성, 관리 그리고 소멸시점을 결정하는 것까지 모두 운영체제의 몫이다!"

커널 오브젝트는 쓰레드, 파일 등의 리소스 관리를 위해서 운영체제가 관리하는 데이터 블록이라고 하지 않았는가? 이렇듯 커널 오브젝트는 생성의 주체도 소유의 주체도 운영체제인 데이터 블록이다.
